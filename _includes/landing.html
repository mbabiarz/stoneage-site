{% if page.landing %}
<link href="/assets/plugins/mixitup/landing-mix.css" type="text/css" rel="stylesheet" />

<script src="http://cdn.jsdelivr.net/jquery.mixitup/latest/jquery.mixitup.min.js"></script>
<script>
$(document).ready(function(){
  $(function(){
      // Instantiate MixItUp:
      $('#Container').mixItUp({
        load: {
          sort: 'myorder:asc'
        }
      });
  });
  
  // Search:
  $(function() {

    $("#Container").mixItUp();

    var inputText;
    var $matching = $();

    // Delay function
    var delay = (function(){
      var timer = 0;
      return function(callback, ms){
        clearTimeout (timer);
        timer = setTimeout(callback, ms);
      };
    })();

    $("#search-input").keyup(function(){
      // Delay function invoked to make sure user stopped typing
      delay(function(){
        inputText = $("#search-input").val().toLowerCase();

        // Check to see if input field is empty
        if ((inputText.length) > 0) {            
          $( '.mix').each(function() {
            $this = $("this");

             // add item to be filtered out if input text matches items inside the title   
             if($(this).children('.search-text').text().toLowerCase().match(inputText)) {
              $matching = $matching.add(this);
            }
            else {
              // removes any previously matched item
              $matching = $matching.not(this);
            }
          });
          $("#Container").mixItUp('filter', $matching);
        }

        else {
          // resets the filter to show all item if input is empty
          $("#Container").mixItUp('filter', 'all');
        }
      }, 200 );
    });
  }); // End Search
})
</script>
{% endif %}